<template name="timeline">
  <ul class="entries">
    {{#each entries}}
      {{#match type="header"}}
        <li id="timeline-contact" class="entry header">
          <div class="head link" data-slug="contact">
            <span class="bullet" style="background-image: url('{{getResizedImageUrl avatar 100 100 'crop'}}');"></span>
            <div class="inner-wrap">
              {{{markdown name root="h1"}}}
              {{{markdown title root="h2"}}}
            </div>
          </div>
        </li>
      {{/match}}
      {{#match type="post"}}
        <li id="timeline-{{urlSlug}}" class="entry post {{parity index}}">
          <div class="head link" data-slug="{{urlSlug}}">
            <span class="bullet {{iconClass icon}}"></span>
            <div class="inner-wrap">
              {{{markdown headline root="h3"}}}
              {{{markdown excerpt}}}
            </div>
          </div>
          {{#if hasExtendedContent}}
            <div class="content">
              <div class="inner-wrap">
                {{#if images.length}}
                  <div class="image-wrap">
                    <div class="viewport">
                      <ul>
                        {{#each images}}
                          <li>
                            <img src="{{getResizedImageUrl url null 300 'clip'}}" alt="{{caption}}">
                            {{#if caption}}
                              <span class="caption">{{caption}}</span>
                            {{/if}}
                          </li>
                        {{/each}}
                      </ul>
                    </div>
                  </div>
                {{/if}}
                {{#if content}}
                  <div class="text">
                    {{{markdown content}}}
                  </div>
                {{/if}}
              </div>
            </div>
          {{/if}}
        </li>
      {{/match}}
      {{#match type="year"}}
        <li id="timeline-{{year}}" class="entry year">
          <span class="bullet link" data-slug="{{year}}">{{year}}</span>
        </li>
      {{/match}}
    {{/each}}
  </ul>
</template>
